let e,t,n,s=Object,l=Object.getPrototypeOf,r=(e,t,n,s)=>(e??(setTimeout(n,s),new Set)).add(t),d={get val(){return this.t},set val(e){let n=this,s=n.t;e!==s&&(n.l===s?t=r(t,n,m):e===n.l&&t.delete(n),n.t=e,n.o.forEach((t=>t(e,s))))},onnew(e){this.o.push(e)}},o=l(d),u=e=>e.nodeType?e:new Text(e),a=(e,...t)=>(t.flat(1/0).forEach((t=>e.appendChild(l(t)===d?p(t,(e=>e)):u(t)))),e),i=t=>new Proxy(((n,...r)=>{let[u,...i]=l(r[0]??0)===o?r:[{},...r],w=t(n);return s.entries(u).forEach((([t,n])=>{let s=w[t]!==e?e=>w[t]=e:e=>w.setAttribute(t,e);l(n)===d?p(n,(e=>(s(e),w))):l(n)===o?p(...n.deps,((...e)=>(s(n.f(...e)),w))):s(n)})),a(w,...i)}),{get:(t,n)=>t.bind(e,n)}),w=i((e=>document.createElement(e))),g=e=>i((t=>document.createElementNS(e,t))),_=g("http://www.w3.org/2000/svg"),c=e=>e.u=e.u.filter((e=>e.i?.isConnected)),m=()=>{let n=[...t];t=e,new Set(n.flatMap(c)).forEach((t=>{let{g:n,i:s,_:l}=t,r=l(...n.map((e=>e.t)),s,...n.map((e=>e.l)));r!==s&&(r!=e?s.replaceWith(t.i=u(r)):(s.remove(),t.i=e))})),n.forEach((e=>e.l=e.t))},p=(...t)=>{let[s]=t.splice(-1,1),l=s(...t.map((e=>e.t)));if(l==e)return[];let d={g:t,i:u(l),_:s};return t.forEach((t=>{n=r(n,t,(()=>(n.forEach(c),n=e)),1e3),t.u.push(d)})),d.i};export default{add:a,tags:w,m:g,p:_,state:e=>({__proto__:d,t:e,l:e,u:[],o:[]}),bind:p};